<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" media="all" />  
</head>
<body>
<table class="table" id="gameTable">
	
</table>

<script type="text/javascript" src="jquery-1.11.2.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript">
var imageData={};
$(document).ready(function(){
	$.getJSON('image.json',function(data){
		console.log(data);
		imageData=data;
		var i=0;
		var html="";
		for(var key in data){
			
			if(i%4==0){
				html=html+"<tr>";
			}
			html=html+"<td id="+key+"><img src='asset/"+key+".gif'>"
			i++;
		}
		$('table').append(html);
		appendCheckbox();
	});
	
	function appendCheckbox(){
		
		$('#gameTable td').append('<input type=checkbox>');
		var counter=0;
		
		$('#gameTable').on('click',':checkbox',function(){
			
			if($(this).is(':checked')){
				counter++;
				
			}else{
				counter--;
			}
			console.log(counter);
			if(counter==3){
				var sel=[];
				$('#gameTable :checked').each(function(i,data){
					var id=$(this).parent().attr('id');
					sel.push(id);
				});
				
				checkSet(sel);
				counter=0;
				$('#gameTable input:checkbox').removeAttr('checked');
				
			}
		});	
	}
	function checkSet(sel){
		var shape=[];
		var color=[];
		var number=[];
		var shading=[];
		$.each(sel,function(index,i){
			shape.push(imageData[i].shape);
			color.push(imageData[i].color);
			number.push(imageData[i].number);
			shading.push(imageData[i].shading);
		});
		if(isSet(shape)&&isSet(color)&&isSet(number)&&isSet(shading)){
			alert("Set");
		}else{
			alert("UnSet");
		}
	}
	
	function isSet(arr){
		console.log(arr);
		var f1=arr[0];
		var f2=arr[1];
		var f3=arr[2];
		if(f1==f2&&f2==f3){
			return true;
		}else if(f1!=f2&&f2!=f3&&f3!=f1){
			return true;
		}else{
			return false;
		}
	}
	
});

</script>

</body>
</html>